<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>find awk 和 grep 使用总结 | 在路上</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="find awk 和 grep 使用总结使用linux工作经常会用到find这个工具去查找文件，找到的文件可以通过awk进行操作，也可以配合grep一起操作，这三个工具一起使用基本上可以高效的完成linux下百分之九十的文本处理工作，今天主要记录一下这三个工具的使用方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="find awk 和 grep 使用总结">
<meta property="og:url" content="https://hxfeng.github.io/blog/2017/02/27/findandawk/index.html">
<meta property="og:site_name" content="在路上">
<meta property="og:description" content="find awk 和 grep 使用总结使用linux工作经常会用到find这个工具去查找文件，找到的文件可以通过awk进行操作，也可以配合grep一起操作，这三个工具一起使用基本上可以高效的完成linux下百分之九十的文本处理工作，今天主要记录一下这三个工具的使用方法。">
<meta property="og:updated_time" content="2017-02-27T14:06:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="find awk 和 grep 使用总结">
<meta name="twitter:description" content="find awk 和 grep 使用总结使用linux工作经常会用到find这个工具去查找文件，找到的文件可以通过awk进行操作，也可以配合grep一起操作，这三个工具一起使用基本上可以高效的完成linux下百分之九十的文本处理工作，今天主要记录一下这三个工具的使用方法。">
  
    <link rel="alternate" href="/atom.xml" title="在路上" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">在路上</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">人不能太舒服，太舒服就会有问题，so解决问题ing</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">首页</a>
        
          <a class="main-nav-link" href="/blog/archives">归档</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://hxfeng.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-findandawk" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2017/02/27/findandawk/" class="article-date">
  <time datetime="2017-02-27T14:06:37.926Z" itemprop="datePublished">2017-02-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      find awk 和 grep 使用总结
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>find awk 和 grep 使用总结<br>使用linux工作经常会用到find这个工具去查找文件，找到的文件可以通过awk进行操作，也可以配合grep<br>一起操作，这三个工具一起使用基本上可以高效的完成linux下百分之九十的文本处理工作，今天主要记录一下这三个<br>工具的使用方法。<br><a id="more"></a></p>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>如果我什么参数也不给，find会打印出当前目录下所有的文件和目录名<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">find</div><div class="line">.</div><div class="line">./_posts</div><div class="line">./_posts/hello-world.md</div><div class="line">./_posts/findandawk.md</div><div class="line">./_posts/test.md</div></pre></td></tr></table></figure></p>
<p>这里有几个默认的参数</p>
<ol>
<li>默认查找的目录为当前目录</li>
<li>默认查找匹配所有记录</li>
<li>默认打印输出匹配到的记录-print<br>上面的这个find与下面的find输出一致</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">find  ./ -print -name <span class="string">"*"</span></div><div class="line">./</div><div class="line">./-name</div><div class="line">./_posts</div><div class="line">./_posts/hello-world.md</div><div class="line">./_posts/findandawk.md</div><div class="line">./_posts/test.md</div></pre></td></tr></table></figure>
<p>-print0可以去掉换行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">find  ./ -print0 -name <span class="string">"*"</span></div><div class="line">././-name./_posts./_posts/hello-world.md./_posts/findandawk.md./_posts/test.md</div></pre></td></tr></table></figure></p>
<p>-printf 可以格式化输出<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">find . -type f -printf <span class="string">" %Tc %p\n"</span></div><div class="line"> Mon 27 Feb 2017 08:54:40 PM CST ./-name</div><div class="line"> Mon 27 Feb 2017 12:31:29 AM CST ./_posts/hello-world.md</div><div class="line"> Mon 27 Feb 2017 09:01:12 PM CST ./_posts/findandawk.md</div><div class="line"> Sat 25 Feb 2017 01:56:06 AM CST ./_posts/test.md</div></pre></td></tr></table></figure></p>
<p>格式化输出的参数有很多这里不一一列举具体可以参考手册 man find 看更多printf的相关内容<br>当然输出不是find的主要功能，find 主要还是查找功能。<br>find 可以按照文件名称，文件类型，权限权限，访问时间等等多种维度去查找,但是我们一般使用最多的是按照文件名称来查找的<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">按文件名查找</div><div class="line">find ./ -name <span class="string">"*.md"</span></div><div class="line">./_posts/hello-world.md</div><div class="line">./_posts/findandawk.md</div><div class="line">./_posts/test.md</div><div class="line">按文件类型查找</div><div class="line">find ./ -type f -name <span class="string">"*.md"</span></div><div class="line">./_posts/hello-world.md</div><div class="line">./_posts/findandawk.md</div><div class="line">./_posts/test.md</div><div class="line"></div><div class="line">一天以前的文件</div><div class="line">find ./ -mtime +1</div></pre></td></tr></table></figure></p>
<p>find还有一个exec的参数可以对找到的文件执行相应的操作，但是这个有一定的危险如果你执行的动作是<br>删除的话请慎重使用，但是rm在-exec里出现的使用频率往往很高<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">用ls列出找到的文件</div><div class="line">./ -mtime +1 -exec ls <span class="_">-l</span> &#123;&#125; \;</div><div class="line">-rw-rw-r--. 1 fangqing fangqing 5456 Feb 25 01:56 ./_posts/test.md</div><div class="line">强制删除当前目录下所有日志，这个动作很危险，要注意检查防止误操作</div><div class="line">find ./ -name <span class="string">"*.log"</span>  -exec rm <span class="_">-f</span> &#123;&#125; \;</div></pre></td></tr></table></figure></p>
<p>find的用法和参数实在是太多，有些高级技巧在需要的时候我就查一下手册，上面find的这些查找参数可以满足日常百分之九十的查找工作。</p>
<h1 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h1><p>awk是一门脚本语言，awk是三位作者名字的首字母，关于awk起源的内容不写了。<br>awk是linux下文本处理的瑞士军刀，你可以通过awk把字符串按照你想要的格式进行切分、合并、拼接、转换<br>甚至算术运算。<br>首先需要记录一下awk的几个内置变量<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">awk</div><div class="line">    ARGC        参数数量</div><div class="line">    ARGIND      当前处理文件在ARGV中的索引</div><div class="line">    ARGV        命令行参数数组</div><div class="line">    FILENAME    当前处理文件的文件名</div><div class="line">    FS          输入字段的分割符</div><div class="line">    NF          记录字段数量.</div><div class="line">    NR          当前输入的记录数量.</div><div class="line">    OFMT        数字输出格式, 默认为<span class="string">"%.6g"</span>.</div><div class="line">    OFS         输出字段分隔符.</div><div class="line">    ORS         输出记录分割符.</div><div class="line">    RS          输入记录分割符号.</div></pre></td></tr></table></figure></p>
<p>这几个变量对awk处理文本有很大影响基本常用就是这几个变量下面记录几个案例<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">./ -print -name <span class="string">"*"</span> -exec ls <span class="_">-l</span> &#123;&#125; \; |awk <span class="string">'&#123;print $NF&#125;'</span></div><div class="line">./</div><div class="line">-name</div><div class="line">_posts</div><div class="line">./-name</div><div class="line">./-name</div><div class="line">./_posts</div><div class="line">findandawk.md</div><div class="line">hello-world.md</div><div class="line">test.md</div><div class="line">./_posts/hello-world.md</div><div class="line">./_posts/hello-world.md</div><div class="line">./_posts/findandawk.md</div><div class="line">./_posts/findandawk.md</div><div class="line">./_posts/test.md</div><div class="line">./_posts/test.md</div><div class="line">`</div></pre></td></tr></table></figure></p>
<p>-F 可以指定字段分隔符，不指定时默认为空白字符，$NF输出最后一个字段.<br>未完待续。。。。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hxfeng.github.io/blog/blog/2017/02/27/findandawk/" data-id="cizo6h2lj0000jttu4v333tpp" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2017/02/27/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          hexo小试牛刀
        
      </div>
    </a>
  
  
    <a href="/blog/2017/02/22/test/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">linux 小工具使用技巧</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/linux/">linux</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">云标签</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/linux/" style="font-size: 10px;">linux</a>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最近发布</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2017/02/27/hello-world/">hexo小试牛刀</a>
          </li>
        
          <li>
            <a href="/blog/2017/02/27/findandawk/">find awk 和 grep 使用总结</a>
          </li>
        
          <li>
            <a href="/blog/2017/02/22/test/">linux 小工具使用技巧</a>
          </li>
        
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 hxfeng<br>
      hxfeng <a href="https://hxfeng.github.io/" target="_blank">我的博客</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">首页</a>
  
    <a href="/blog/archives" class="mobile-nav-link">归档</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js"></script>


<script src="/blog/js/script.js"></script>

  </div>
</body>
</html>